(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8879],{7530:function(e,t,s){Promise.resolve().then(s.bind(s,70894))},99:function(e,t,s){"use strict";var a=s(57437),r=s(12621),l=s(2265),n=s(96164);t.Z=e=>{let{className:t,src:s,...i}=e,[o,c]=(0,l.useState)("");return(0,l.useEffect)(()=>{c((0,r.M)(s||""))},[s]),(0,a.jsx)("img",{...i,src:o,className:(0,n.m6)("rounded-full object-cover",t),onError:()=>{}})}},99383:function(e,t,s){"use strict";var a=s(57437),r=s(96164);t.Z=e=>{let{className:t,variant:s,size:l,children:n,disabled:i,...o}=e;return(0,a.jsx)("button",{className:(0,r.m6)(i&&"opacity-50","group box-border inline-flex justify-center items-center px-[1.5rem]","sm"===l&&"h-[40px] leading-[40px] rounded-[20px]","primary"===s&&"bg-blue hover:opacity-[0.8]",t),disabled:i,...o,children:"object"==typeof n?(0,a.jsx)(a.Fragment,{children:n}):(0,a.jsx)("p",{className:"text-white font-medium",children:n})})}},579:function(e,t,s){"use strict";var a=s(57437),r=s(96164);t.Z=e=>{let{className:t}=e;return(0,a.jsx)("hr",{className:(0,r.m6)("w-full border-b-2 rounded-sm border-primary dark:border-dark-primary outline-none",t)})}},12738:function(e,t,s){"use strict";var a=s(57437),r=s(12621),l=s(2265),n=s(96164);t.Z=e=>{let{src:t,className:s,vertical:i,imgClassName:o,...c}=e,d=(0,l.useMemo)(()=>(0,r.M)(t||""),[t]);return(0,a.jsx)("div",{className:(0,n.m6)("w-full",!i&&"aspect-[16/9]",s),style:{borderRadius:"5px",overflow:"hidden"},children:(0,a.jsx)("img",{className:(0,n.m6)("w-full h-full",o),style:{objectFit:"cover",borderRadius:"5px",overflow:"hidden"},src:d,alt:"full-size-image",...c})})}},86281:function(e,t,s){"use strict";s.d(t,{f:function(){return a},ModalHelmetWrapper:function(){return g},d:function(){return f}});var a,r=s(57437),l=s(2265),n=s(96164),i=s(98492),o=s(86727),c=s(17847),d=s(85097),u=e=>{let{open:t,onClose:s,center:a,children:l}=e;return(0,r.jsx)("section",{className:(0,n.m6)("fixed inset-0 z-[1000] hidden",t&&"flex"),style:{backgroundColor:"rgba(0,0,0,0.5)"},onClick:e=>{e.stopPropagation(),s(!1)},children:(0,r.jsx)("div",{className:(0,n.m6)(a&&"absolute top-[50%] left-[50%]"),style:{...a&&{transform:"translate(-50%,-50%)"}},children:(0,r.jsxs)(c.E.div,{className:(0,n.m6)("relative p-8 rounded-lg bg-primary dark:bg-dark-primary"),variants:{hide:{y:-100,visibility:"hidden",opacity:0},show:{y:0,visibility:"visible",opacity:1}},initial:"hide",animate:t?"show":"hide",onClick:e=>{e.stopPropagation()},children:[(0,r.jsx)(d.bjh,{className:"absolute size-6 right-4 top-4 cursor-pointer dark:text-text-color-dark",onClick:e=>{s(!1),e.stopPropagation()}}),l]})})})},m=s(75735),x=s(60094),p=e=>{let{...t}=e,{auth:s}=(0,x.E)(),a=[{icon:(0,r.jsx)(i.ie,{className:"size-5"}),label:"Sign in with Google",handleClick:()=>{let e=new m.hJ;e.addScope("profile"),e.addScope("email"),(0,m.rh)(s,e).then(()=>{t.onClose(!1)}).catch(e=>{console.log(e)})}},{icon:(0,r.jsx)(i.Ey,{className:"group-hover/lgItem:text-white dark:group-hover/lgItem:text-text-color size-5 dark:text-white text-text-color"}),label:"Sign in with Github",handleClick:()=>{let e=new m.GH;e.addScope("user"),e.addScope("read:user"),e.addScope("user:email"),(0,m.rh)(s,e).then(()=>{t.onClose(!1)}).catch(e=>{console.log(e)})}},{icon:(0,r.jsx)(i.s1,{className:"size-5 "}),label:"Sign in with Facebook",handleClick:()=>{let e=new m._O;e.addScope("public_profile"),e.addScope("email"),(0,m.rh)(s,e).then(()=>{t.onClose(!1)}).catch(e=>{console.log(e)})}}];return(0,r.jsx)(u,{...t,children:(0,r.jsxs)("div",{className:"min-w-[376px] flex flex-col",children:[(0,r.jsx)(o.Z,{component:"h2",className:"text-[1.5rem] font-bold leading-6",children:"Welcome back"}),(0,r.jsx)("div",{className:"flex flex-col mt-12 gap-4",children:a.map((e,t)=>{let{icon:s,label:a,handleClick:l}=e;return(0,r.jsxs)("div",{className:(0,n.m6)("group/lgItem","cursor-pointer flex justify-center items-center p-[10px_20px] rounded-lg","border-solid border-[1px] border-secondary","hover:bg-gray-secondary"),onClick:l,children:[s,(0,r.jsx)(o.Z,{className:(0,n.m6)("ml-2 font-bold dark:text-gray","group-hover/lgItem:text-text-color-dark"),children:a})]},"login_".concat(t))})})]})})};(a||(a={})).SIGN_IN="SIGN_IN";let h=l.createContext({states:[],closeModal:e=>{},openModal:(e,t)=>{}}),g=e=>{let{children:t}=e,[s,a]=(0,l.useState)([]),n=e=>{let t=[...s],r=s.findIndex(t=>t.key===e);-1!==r&&(t.splice(r,1),a(t))};return(0,r.jsxs)(h.Provider,{value:{states:s,closeModal:n,openModal:(e,t)=>{let r=[...s],l=s.findIndex(t=>t.key===e);-1!==l?(r[l].props=t,a(r)):a([...r,{key:e,props:t}])}},children:[t,s.map(e=>(0,r.jsx)(r.Fragment,{children:"SIGN_IN"===e.key&&(0,r.jsx)(p,{open:!0,onClose:e=>{n("SIGN_IN")},center:!0,...e.props})}))]})},f=()=>(0,l.useContext)(h)},11943:function(e,t,s){"use strict";s.d(t,{$b:function(){return o},Er:function(){return n},W3:function(){return l},fW:function(){return a},jN:function(){return c},o_:function(){return i},sW:function(){return d},vq:function(){return r}});let a="https://www.linkedin.com/in/huy-ho%C3%A0ng-359207212",r="https://www.facebook.com/croong.hoang",l="https://github.com/duchuyhoang",n="https://www.instagram.com/duchuy_h",i="https://x.com/HuyHoang1003200",o="post-detail-wrapper",c=16/9,d=.8},60094:function(e,t,s){"use strict";s.d(t,{default:function(){return g},E:function(){return h}});var a=s(57437),r=s(75735),l=s(83845);let n=(0,r.v0)(l.Z);var i=s(2265),o=s(60657),c=s(99854),d=s(18388);let u=(0,c.cF)(l.Z);class m{async uploadImageByUrl(e){let t=await new Promise((t,s)=>{let a=new Image;a.src=e.url,a.crossOrigin="anonymous",a.onload=function(){let e=document.createElement("canvas");e.width=a.width,e.height=a.height,e.getContext("2d").drawImage(a,0,0),e.toBlob(e=>{e?t(e):s(Error("Failed to convert image to blob"))})}}),s=await (0,c.KV)((0,c.iH)(this.storage,e.fileName||"".concat((0,d.k)(),".").concat(t.type)),t);return{result:s,url:await (0,c.Jt)(s.ref)}}constructor(e){this.storage=e}}let x=new m(u),p=i.createContext({auth:n,eagerSignInLoading:!0,user:null,signOut:()=>{}}),h=()=>(0,i.useContext)(p);var g=e=>{let{children:t}=e,[s,l]=(0,i.useState)(null),[c,d]=(0,i.useState)(!0);return console.log(s),(0,i.useLayoutEffect)(()=>{let e=n.onAuthStateChanged(async e=>{if(e){var t,s;let a=await o._.findById(e.uid);console.log(a);let r={uid:e.uid,email:(null===(t=e.providerData[0])||void 0===t?void 0:t.email)||e.email,displayName:(null===(s=e.providerData[0])||void 0===s?void 0:s.displayName)||e.displayName,photoURL:e.photoURL,providerPhotoUrl:e.photoURL};if(a&&(r={...a,...r}),!a&&(null==e?void 0:e.photoURL)||e.photoURL&&e.photoURL!==(null==a?void 0:a.providerPhotoUrl)){let{url:t}=await x.uploadImageByUrl({url:e.photoURL,fileName:"avatar/".concat(e.uid,".png")});r={...r,photoURL:t}}console.log("final",r),await o._.upsert(r.uid,r),l(r)}else l(null);d(!1)});return()=>{e()}},[]),(0,a.jsx)(p.Provider,{value:{user:s,auth:n,eagerSignInLoading:c,signOut:()=>{(0,r.w7)(n)}},children:t})}},83845:function(e,t,s){"use strict";let a=(0,s(15236).ZF)({apiKey:"AIzaSyD63hodF2l2YG1qBYA3KrG_1lP6G34nHJY",authDomain:"duchuyhoangblog-5e5df.firebaseapp.com",databaseURL:"https://duchuyhoangblog-5e5df-default-rtdb.europe-west1.firebasedatabase.app",projectId:"duchuyhoangblog-5e5df",storageBucket:"duchuyhoangblog-5e5df.appspot.com",messagingSenderId:"1096120152389",appId:"1:1096120152389:web:a9dc5229dfdf01f9168e2c",measurementId:"G-B61M3RRE1T"});t.Z=a},12921:function(e,t,s){"use strict";var a=s(69842),r=s(83845);let l=(0,a.ad)(r.Z);t.Z=l},58553:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var a=s(69842),r=s(12921),l=s(18388);class n{async upsert(e,t){let s=(0,a.JU)(this.ref,e);return(await (0,a.QT)(s)).exists()?(0,a.r7)(s,t):this.create(t,{id:e})}async create(e,t){let{id:s,...r}=t||{};return(0,a.pl)((0,a.JU)(this.ref,s||(0,l.k)()),e,r)}async findById(e){let t=(0,a.JU)(this.ref,e);return(await (0,a.QT)(t)).data()}async getAll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[this.ref,...e];return(0,a.PL)(a.IO.apply(null,t))}async deleteByConditions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[this.ref,...e],s=await (0,a.PL)(a.IO.apply(null,t));await Promise.all(s.docs.map(async e=>{let t=(0,a.JU)(this.ref,e.id);await (0,a.oe)(t)}))}constructor(e,t){this.dbName=e,this.ref=t?(0,a.hJ)(r.Z,this.dbName).withConverter(t):(0,a.hJ)(r.Z,this.dbName)}}},60657:function(e,t,s){"use strict";s.d(t,{_:function(){return l},y:function(){return r}});var a=s(58553);let r="users",l=new a.Z(r,null)},70894:function(e,t,s){"use strict";s.d(t,{default:function(){return ef}});var a,r,l,n,i=s(57437),o=s(26474),c=s(2265),d=s(16356);s(51159);var u=s(98492),m=s(37692);(a=l||(l={})).INFO="INFO",a.WARNING="WARNING",a.DANGER="DANGER";let x={INFO:"info",WARNING:"warning",DANGER:"danger"};var p=s(86727),h=s(87138),g=s(41942),f=s(96164);let N=e=>{let{id:t,title:s}=e;return(0,i.jsx)("div",{className:"flex items-center lg:mb-2",title:s,children:(0,i.jsxs)(p.Z,{component:"h5",className:"text-[1.72rem] font-bold",children:[(0,i.jsx)(h.default,{href:"#".concat(t),children:(0,i.jsx)(g.gjK,{size:"18px",className:"inline mr-2 dark:text-secondary-dark text-secondary rotate-[10deg] transition-all duration-500"})}),s]})})};var j=s(12738),v=s(66927),y=s(65716),b=s(99012),w=s(82582),k=s(49441),Z=s(11500),I=s(54111),S=s(8482),E=s(75618),C=s(48953),z=s(59067),A=s(29824),L=s(63872),R=s(35233);let F={javascript:(0,i.jsx)(u.Q_,{className:"size-[16px]"}),jsx:(0,i.jsx)(L.huN,{className:"text-[#61dafb] size-[16px]"},1),tsx:(0,i.jsx)(L.huN,{className:"text-[#61dafb] size-[16px]"},1),js:(0,i.jsx)(u.Q_,{className:"size-[16px]"}),typescript:(0,i.jsx)(u.xg,{className:"size-[16px]"}),ts:(0,i.jsx)(u.xg,{className:"size-[16px]"}),python:(0,i.jsx)(u.ix,{className:"size-[16px]"}),php:(0,i.jsx)(u.zT,{className:"w-[20px] h-[11px]"}),sass:(0,i.jsx)(u.hV,{className:"size-[16px]"}),css:(0,i.jsx)(u.c4,{className:"size-[16px]"}),bash:(0,i.jsx)(u.fA,{className:"size-[16px]"}),powershell:(0,i.jsx)(R.wdL,{className:"size-[16px]"}),md:(0,i.jsx)(u.io,{className:"size-[20px]"}),mdx:(0,i.jsx)(u.io,{className:"size-[20px]"})};v.Z.registerLanguage("javascript",y.Z),v.Z.registerLanguage("typescript",b.Z),v.Z.registerLanguage("js",y.Z),v.Z.registerLanguage("ts",b.Z),v.Z.registerLanguage("css",w.Z),v.Z.registerLanguage("scss",k.Z),v.Z.registerLanguage("tsx",b.Z),v.Z.registerLanguage("python",Z.Z),v.Z.registerLanguage("php",I.Z),v.Z.registerLanguage("powershell",E.Z),v.Z.registerLanguage("bash",S.Z),v.Z.registerLanguage("jsx",C.Z),v.Z.registerLanguage("tsx",z.Z),v.Z.registerLanguage("mdx",A.Z),v.Z.registerLanguage("md",A.Z);var _=v.Z,G=s(58724),Y=s(54008),P=s(14983);s(2189);let D=e=>(0,i.jsx)(i.Fragment,{children:e.children}),M=e=>{let{handleCopy:t,language:s,fileName:a}=e;return e=>{let[r,l]=(0,c.useState)(!1),n=()=>{l(!0),setTimeout(()=>{l(!1)},3e3)},o=e=>{console.log(e)},d=F[s]||F.js;return(0,i.jsxs)("section",{children:[(0,i.jsxs)("div",{className:"language-wrapper flex items-center",children:[d,(0,i.jsx)("p",{className:"ml-2",style:{color:"#dedddd"},children:a})]}),(0,i.jsxs)("div",{className:"code-wrapper",children:[(0,i.jsx)("div",{className:"copy-wrappper",children:r?(0,i.jsx)(P.jbV,{size:30,style:{fill:"#28a745"}}):(0,i.jsx)(Y.nAO,{size:26,onClick:()=>{t(n,o)}})}),(0,i.jsx)("pre",{lang:"language-".concat(s),style:{overflow:"auto"},children:e.children})]})]})}};var U=s(579),H=s(11943),O=s(12621);s(54852);let T={p:e=>(0,i.jsx)(p.Z,{component:"p",className:"text-justify lg:text-start font-medium",...e}),FullSizeImage:j.Z,Article:e=>{let{title:t,id:s,children:a,className:r,...l}=e,n=!!t;return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("article",{title:t,id:s,className:(0,f.m6)("scroll-mt-[80px] my-4",r),style:{scrollMarginTop:"80px"},children:[n&&(0,i.jsx)(N,{id:s,title:t}),a]})})},code:e=>{let{className:t,children:s,...a}=e;return(0,i.jsx)("code",{className:(0,f.m6)("inline-block lg:py-[1.5px] px-[4px] bg-code-bg dark:bg-dark-tag rounded-[5px] dark:text-text-color-dark text-[0.875rem]",t),children:s})},pre:e=>{var t,s,a;let r=(0,c.useCallback)((t,s)=>{let a=e.children.props.children;navigator.clipboard.writeText(a).then(()=>{"function"==typeof t&&t()}).catch(e=>{"function"==typeof s&&s()})},[e.children]),l=(0,c.useMemo)(()=>{var t,s,a;return(null==e?void 0:null===(a=e.children)||void 0===a?void 0:null===(s=a.props)||void 0===s?void 0:null===(t=s.className)||void 0===t?void 0:t.split("-")[1])||"javascript"},[null==e?void 0:null===(s=e.children)||void 0===s?void 0:null===(t=s.props)||void 0===t?void 0:t.className]),n=(0,c.useMemo)(()=>(null==e?void 0:e.filename)||"example",[null==e?void 0:e.filename]);return(0,i.jsx)("div",{className:e.className,children:(0,i.jsx)(_,{showLineNumbers:!!e.showLine,CodeTag:D,PreTag:M({handleCopy:r,language:l,fileName:n}),children:null===(a=e.children.props.children)||void 0===a?void 0:a.trim(),language:l,style:{...G.Z}})})},li:e=>(0,i.jsx)(p.Z,{component:"li",className:"text-justify lg:text-start font-medium",...e}),hr:U.Z,img:e=>{let{src:t,className:s,...a}=e,[r,l]=(0,c.useState)(H.jN),n=(0,c.useMemo)(()=>(0,O.M)(t||""),[t]);return(0,c.useLayoutEffect)(()=>{if(n){let e=new Image;e.src=n,e.onload=t=>{let s=e.width,a=e.height;s-20===a||a-20===s||s===a?l(1):s>a?l(Math.max(s/a,H.jN)):l(H.sW)}}},[n]),(0,i.jsx)("img",{className:(0,f.m6)("w-full rounded-[5px] aspect-[".concat(r,"]"),s),src:n,alt:"",style:{aspectRatio:r},...a})},Quote:e=>{let{title:t,type:s,children:a}=e;return(0,i.jsxs)("div",{className:"quote mt-5 mb-5 ".concat(x[s]||x.INFO),children:[(0,i.jsxs)("div",{className:"icon-wrapper flex justify-center items-center size-[36px] rounded-full absolute bg-primary dark:bg-dark-primary top-[-18px] left-[-18px]",children:["INFO"===s&&(0,i.jsx)(u.kI,{className:"size-[24px]"}),"DANGER"===s&&(0,i.jsx)(d.JSF,{color:"#ed3c50",className:"size-[32px]"}),"WARNING"===s&&(0,i.jsx)(m.s3c,{className:"size-[32px]",color:"#ad850e"})]}),(0,i.jsx)("h3",{className:"quote_title",children:t}),a]})}};var W=e=>(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(o.R,{...e,components:T})}),B=s(99),J=s(62737),K=s.n(J),Q=s(69842),q=s(58553),V=s(60657),$=s(12921);class X{constructor(e,t,s,a,r){this.id=e,this.postId=t,this.content=s,this.user=a,this.createAt=r}}let ee=new q.Z("post-comments",{toFirestore:e=>({content:e.content,createAt:(0,Q.Bt)(),postId:e.postId,user:(0,Q.JU)($.Z,"".concat(V.y,"/").concat(e.user.uid))}),fromFirestore(e,t){let s=e.data();return new X(e.id,s.postId,s.content,s.user,s.createAt)}});var et=s(99383),es=s(86281),ea=s(60094),er=s(69824),el=s(18388),en=e=>{let{postId:t,handleAddCommentSucceed:s}=e,{user:a}=(0,ea.E)(),[r,l]=(0,c.useState)(""),[n,o]=(0,c.useState)(!1),d=(0,c.useRef)(null),{openModal:m}=(0,es.d)();(0,c.useEffect)(()=>{a||l("")},[a]);let x=async e=>{if(e.preventDefault(),!r.trim())return;o(!0);let n=Q.EK.now(),i=(0,el.k)();await ee.create({content:r.trim(),postId:t,user:a,createAt:n},{id:i}),s({content:r.trim(),postId:t,createAt:n,user:a,id:i}),l(""),o(!1),console.log(e)};return(0,i.jsxs)("section",{className:"flex",children:[(0,i.jsx)(B.Z,{className:"size-[46px] mr-4",src:null==a?void 0:a.photoURL}),(0,i.jsxs)("form",{className:"flex-1 flex flex-col",onSubmit:x,children:[(0,i.jsxs)("div",{className:"relative w-full",children:[!a&&(0,i.jsx)("div",{className:"rounded-[5px] absolute inset-0 flex justify-center items-center",style:{background:"rgba(0,0,0,0.15)"},children:(0,i.jsx)(et.Z,{size:"sm",variant:"primary",onClick:()=>{m(es.f.SIGN_IN)},children:"Sign in"})}),(0,i.jsx)("textarea",{value:r,ref:d,onChange:e=>{d.current&&(d.current.style.height="auto",d.current.style.height="".concat(d.current.scrollHeight,"px")),e.target.value.trim().length<=255&&l(e.target.value)},rows:4,className:(0,f.m6)("min-h-full break-all","min-w-full outline-none rounded-[5px] p-[10px] resize-none dark border-[1px] border-solid border-primary","dark:bg-[rgba(0,0,0,0.15)] dark:border-dark-primary","dark:text-text-color-dark","placeholder-gray-light dark:placeholder-gray placeholder:font-medium"),placeholder:a?"Write your comment.":"Sign in to comment"}),a&&(0,i.jsx)("div",{className:"absolute right-1 bottom-1",children:(0,i.jsxs)(p.Z,{className:"text-[12px] text-gray-light dark:!text-gray font-semibold",children:[r.trim().length," / ",255]})})]}),a&&(0,i.jsx)("div",{className:"flex justify-end mt-2",children:(0,i.jsx)(et.Z,{type:"submit",variant:"primary",size:"sm",className:"rounded-[6px] px-[1rem]",disabled:n,children:(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)(p.Z,{className:"text-text-color-dark font-semibold",children:"Send"}),n?(0,i.jsx)(u.Qj,{className:"ml-1 text-text-color-dark animate-spin",style:{animationDuration:.25}}):(0,i.jsx)(er.OUD,{className:"size-6 ml-1 text-text-color-dark"})]})})})]})]})},ei=e=>{var t,s;let{comment:a}=e;return a?(0,i.jsxs)("div",{className:"flex",children:[(0,i.jsx)("div",{className:"mt-2 mr-3 size-[50px] min-w-[50px]",children:(0,i.jsx)(B.Z,{src:null==a?void 0:null===(t=a.user)||void 0===t?void 0:t.photoURL,className:"size-full"})}),(0,i.jsxs)("div",{className:"flex flex-col w-[calc(100%_-_62px)]",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)(p.Z,{component:"strong",className:"font-semibold !text-[13px]",children:(null==a?void 0:null===(s=a.user)||void 0===s?void 0:s.displayName)||"Anomyous"}),(0,i.jsxs)(p.Z,{component:"p",className:"font-semibold !text-[12px] !text-gray ml-1",children:["write in"," ",K()(a.createAt.toDate()).format("DD-MM-YYYY HH:mm:ss")]})]}),(0,i.jsx)("div",{className:(0,f.m6)("break-all max-w-full","whitespace-pre-wrap w-max mt-2 outline-none rounded-[5px] p-[10px] resize-none dark border-[1px] border-solid border-primary","dark:bg-[rgba(0,0,0,0.15)] dark:border-dark-primary","dark:text-text-color-dark"),children:a.content})]})]}):null},eo=e=>{let{size:t,className:s}=e;return(0,i.jsx)("div",{className:(0,f.m6)("flex justify-center items-center",s),children:(0,i.jsx)(u.Qj,{className:(0,f.m6)("animate-spin text-text-color-dark","sm"===t&&"size-4","md"===t&&"size-6","lg"===t&&"size-12"),style:{animationDuration:.25}})})};let ec="post-comment";var ed=e=>{let{postId:t}=e,[s,a]=(0,c.useState)(!1),[r,l]=(0,c.useState)(!1),[n,o]=(0,c.useState)(0),[d,u]=(0,c.useState)([]);return console.log(d),(0,c.useLayoutEffect)(()=>{(async()=>{l(!0);let e=await ee.getAll([(0,Q.ar)("postId","==",t)]);u(await Promise.all(e.docs.map(async e=>{let t=e.data(),s=(await (0,Q.QT)(t.user)).data();return{...t,user:s}}))),l(!1)})()},[t]),(0,i.jsx)("section",{id:ec,className:"flex flex-col mb-16 mt-12",children:r?(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(eo,{size:"lg",className:"w-full h-full my-6"})}):(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsx)("div",{className:"flex",children:(0,i.jsxs)(p.Z,{component:"h2",className:"!text-[1.375rem] mb-8 font-bold",children:[d.length," comments"]})}),(0,i.jsxs)("div",{className:"flex flex-col gap-4",children:[d.slice(0,(n+1)*2).map(e=>(0,i.jsx)("div",{children:(0,i.jsx)(ei,{comment:e})},e.id)),(n+1)*2<d.length&&!s&&(0,i.jsx)("div",{className:"flex justify-center mt-4",children:(0,i.jsx)(et.Z,{variant:"primary",size:"sm",onClick:()=>{a(!0),setTimeout(()=>{o(n+1),a(!1)},1e3)},children:"Load more"})}),s&&(0,i.jsx)(eo,{size:"md",className:"mt-4"})]}),(0,i.jsx)("section",{className:"mt-12",children:(0,i.jsx)(en,{postId:t,handleAddCommentSucceed:e=>{u(t=>[e,...t])}})})]})})},eu=s(16463),em=e=>{let{metadata:t}=e,s=(0,eu.useRouter)(),a=(0,eu.usePathname)();return console.log(a),(0,i.jsxs)("section",{className:"flex flex-col",children:[(0,i.jsx)(p.Z,{component:"h1",className:"mb-3 lg:mb-6 text-[2rem] lg:text-[3rem] leading-[1.2] font-bold",children:t.title}),(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)(B.Z,{src:t.author.avatar,className:"size-[36px] lg:size-[44px]"}),(0,i.jsxs)("div",{className:"flex justify-between flex-col ml-2",children:[(0,i.jsx)(p.Z,{className:"font-medium cursor-pointer hover:underline",children:t.author.name}),(0,i.jsxs)("div",{className:"flex items-center text-[0.875rem] !text-gray-light dark:!text-gray",children:[K()(t.date,"DD-MM-YYYY").format("MMM DD, YYYY"),(0,i.jsx)("span",{className:"mx-1 lg:mx-2",children:"•"}),t.minutesRead," min read",(0,i.jsx)("span",{className:"mx-1 lg:mx-2",children:"•"}),(0,i.jsx)(p.Z,{onClick:()=>{s.replace("".concat(a,"#").concat(ec),{scroll:!0})},className:"cursor-pointer font-bold hover:underline",children:"Leave a comment"})]})]})]})]})},ex=()=>{let[e,t]=(0,c.useState)([]);(0,c.useLayoutEffect)(()=>{let e=document.getElementById(H.$b),s=[],a=(e,t)=>{let s=null==e?void 0:e.querySelectorAll("& > [id]");0!==s.length&&s.forEach(e=>{let s={data:{id:e.id,label:e.title||e.id},childrens:[]};t.push(s),a(e,s.childrens)})};a(e,s),t(s)},[]);let s=e=>{let t=e.childrens||[];return(0,i.jsxs)("ul",{className:"ml-2",children:[(0,i.jsx)("li",{className:(0,f.m6)("flex items-center mt-[0.5rem]"),children:(0,i.jsxs)(h.default,{href:"#".concat(e.data.id),className:"group/navigator flex items-center",children:[(0,i.jsx)(d.aWf,{className:"dark:text-secondary-dark text-secondary min-w-[20px] min-h-[20px]"}),(0,i.jsx)(p.Z,{className:"text-[0.875rem] font-medium group-hover/navigator:text-blue group-hover/navigator:font-bold",style:{},children:e.data.label})]})}),t.map(e=>(0,i.jsx)(i.Fragment,{children:s(e)}))]},e.data.id)};return(0,i.jsxs)("section",{className:"p-3 dark:bg-card-bg-dark bg-white rounded-[5px] flex flex-col sticky top-[10.5%]",id:"postContentTable",children:[(0,i.jsx)(p.Z,{className:"uppercase font-bold text-[0.8rem]",children:"Table of Contents"}),e.map(e=>(0,i.jsx)(i.Fragment,{children:s(e)}))]})};(r=n||(n={})).LIKE="LIKE",r.HEART="HEART",r.SAD="SAD",r.ANGRY="ANGRY",r.HAPPY="HAPPY",r.COFFEE="COFFEE";let ep=new q.Z("post-reactions",null);s(5538);let eh=[{value:n.LIKE,Component:u.mN,className:"icon like-icon text-gray"},{value:n.HEART,Component:u.Xd,className:"icon heart-icon text-gray"},{value:n.HAPPY,Component:u.YJ,className:"icon happy-icon text-gray"},{value:n.COFFEE,Component:u.nY,className:"icon coffee-icon text-gray"},{value:n.SAD,Component:u._H,className:"icon sad-icon"},{value:n.ANGRY,Component:u.Gl,className:"icon angry-icon text-gray"}];var eg=e=>{let{postId:t}=e,{user:s}=(0,ea.E)(),{openModal:a}=(0,es.d)(),[r,l]=(0,c.useState)(!1),[o,d]=(0,c.useState)({[n.LIKE]:[],[n.HEART]:[],[n.HAPPY]:[],[n.COFFEE]:[],[n.SAD]:[],[n.ANGRY]:[]});(0,c.useLayoutEffect)(()=>{(async()=>{let e=await ep.getAll([(0,Q.ar)("postId","==",t)]),s={[n.LIKE]:[],[n.HEART]:[],[n.HAPPY]:[],[n.COFFEE]:[],[n.SAD]:[],[n.ANGRY]:[]};e.docs.map(e=>{let t=e.data();s[t.type].push(t.user)}),d(s)})()},[t]);let u=async(e,n)=>{if(r)return;if(!s)return a(es.f.SIGN_IN);let i={...o};l(!0),n?(await ep.create({postId:t,type:e,user:null==s?void 0:s.uid}),i[e].push(s.uid)):(await ep.deleteByConditions([(0,Q.ar)("user","==",null==s?void 0:s.uid),(0,Q.ar)("type","==",e)]),i[e]=i[e].filter(e=>e!==(null==s?void 0:s.uid))),l(!1),d(i)};return(0,i.jsx)("section",{className:"grid grid-cols-12 gap-4 mt-11",children:eh.map((e,t)=>{let{value:a,Component:r,className:l}=e,n=o[a].includes(null==s?void 0:s.uid);return(0,i.jsxs)("div",{className:(0,f.m6)("border-[1px] border-transparent cursor-pointer reaction-item col-span-2 flex items-center justify-center h-[50px] box-border p-[5px_10px] bg-code-bg dark:bg-code-bg-dark rounded-[5px]",n&&"border-primary dark:border-dark-primary bg-code-bg-dark active",l),onClick:()=>{u(a,!n)},children:[(0,i.jsx)(r,{className:(0,f.m6)("size-6",l,n&&"active")}),(0,i.jsx)(p.Z,{className:(0,f.m6)("ml-2 font-semibold",l,n&&"active"),children:o[a].length})]},a)})})},ef=e=>{let{postDetailCompliedData:t,metadata:s}=e;return s&&t?(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsx)(em,{metadata:s}),(0,i.jsxs)("div",{className:"grid grid-cols-12 mt-3 lg:mt-8",children:[(0,i.jsx)("div",{className:"col-span-12 md:col-span-9 pr-0 md:pr-8",id:H.$b,children:(0,i.jsx)(W,{...t})}),(0,i.jsx)("div",{className:"col-span-3 hidden md:!block",children:(0,i.jsx)(ex,{})})]}),(0,i.jsx)(eg,{postId:s.slug}),(0,i.jsx)(ed,{postId:s.slug})]}):null}},12621:function(e,t,s){"use strict";s.d(t,{M:function(){return a}});let a=e=>e.startsWith("https://")||e.startsWith("http://")?e:"".concat("/duc-huy-hoang-blog-v2","/").concat(e).replace("//","/")},18388:function(e,t,s){"use strict";function a(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){let t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})}s.d(t,{k:function(){return a}})},2189:function(){},54852:function(){},51159:function(){},5538:function(){}},function(e){e.O(0,[8575,7699,7240,5706,4358,5605,5452,1821,5957,3665,6051,8422,6696,231,8143,9237,4783,2971,7023,1744],function(){return e(e.s=7530)}),_N_E=e.O()}]);